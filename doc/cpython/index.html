<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `cpython` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, cpython">

    <title>cpython - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'></p><script>window.sidebarCurrent = {name: 'cpython', ty: 'mod', relpath: '../'};</script>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>cpython</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="collapse-all" href="#">[-]</a>&nbsp;<a id="expand-all" href="#">[+]</a>
        </span><a id='src-0' class='srclink' href='../src/cpython/lib.rs.html#19-214'>[src]</a></span></h1>
<div class='docblock'><p>Rust bindings to the python interpreter.</p>

<h1 id="ownership-and-lifetimes" class='section-header'><a
                           href="#ownership-and-lifetimes">Ownership and Lifetimes</a></h1>
<p>In python, all objects are implicitly reference counted.
In rust, we will use the <code>PyObject</code> type to represent a reference to a python object.</p>

<p>Because all python objects potentially have multiple owners, the concept
concept of rust mutability does not apply to python objects.
As a result, this API will allow mutating python objects even if they are not stored
in a mutable rust variable.</p>

<p>The python interpreter uses a global interpreter lock (GIL)
to ensure thread-safety.
This API uses the lifetime parameter <code>PyObject&lt;&#39;p&gt;</code> to ensure that python objects cannot
be accessed without holding the GIL.
Throughout this library, the lifetime <code>&#39;p</code> always refers to the lifetime of the python interpreter.</p>

<p>When accessing existing objects, the lifetime on <code>PyObject&lt;&#39;p&gt;</code> is sufficient to ensure that the GIL
is held by the current code. But we also need to ensure that the GIL is held when creating new objects.
For this purpose, this library uses the marker type <code>Python&lt;&#39;p&gt;</code>,
which acts like a reference to the whole python interpreter.</p>

<p>You can obtain a <code>Python&lt;&#39;p&gt;</code> instance by acquiring the GIL, or by calling <code>python()</code>
on any existing python object.</p>

<h1 id="error-handling" class='section-header'><a
                           href="#error-handling">Error Handling</a></h1>
<p>The vast majority of operations in this library will return <code>PyResult&lt;&#39;p, ...&gt;</code>.
This is an alias for the type <code>Result&lt;..., PyErr&lt;&#39;p&gt;&gt;</code>.</p>

<p>A <code>PyErr</code> represents a python exception. Errors within the rust-cpython library are
also exposed as python exceptions.</p>

<h1 id="example" class='section-header'><a
                           href="#example">Example</a></h1><pre id='rust-example-rendered' class='rust '>
<span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>cpython</span>;

<span class='kw'>use</span> <span class='ident'>cpython</span>::{<span class='ident'>PythonObject</span>, <span class='ident'>Python</span>};
 
<span class='kw'>fn</span> <span class='ident'>main</span>() {
    <span class='kw'>let</span> <span class='ident'>gil_guard</span> <span class='op'>=</span> <span class='ident'>Python</span>::<span class='ident'>acquire_gil</span>();
    <span class='kw'>let</span> <span class='ident'>py</span> <span class='op'>=</span> <span class='ident'>gil_guard</span>.<span class='ident'>python</span>();
    <span class='kw'>let</span> <span class='ident'>sys</span> <span class='op'>=</span> <span class='ident'>py</span>.<span class='ident'>import</span>(<span class='string'>&quot;sys&quot;</span>).<span class='ident'>unwrap</span>();
    <span class='kw'>let</span> <span class='ident'>version</span> <span class='op'>=</span> <span class='ident'>sys</span>.<span class='ident'>get</span>(<span class='string'>&quot;version&quot;</span>).<span class='ident'>unwrap</span>().<span class='ident'>extract</span>::<span class='op'>&lt;</span><span class='ident'>String</span><span class='op'>&gt;</span>().<span class='ident'>unwrap</span>();
    <span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;Hello Python {}&quot;</span>, <span class='ident'>version</span>);
}
</pre>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='mod' href='exc/index.html'
                               title='cpython::exc'>exc</a></td>
                        <td class='docblock short'>
                             <p>This module contains the python exception types.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='mod' href='oldstyle/index.html'
                               title='cpython::oldstyle'>oldstyle</a></td>
                        <td class='docblock short'>
                             <p>This module contains support for old-style classes. Only available in Python 2.x.</p>

                        </td>
                    </tr>
                </table><h2 id='macros' class='section-header'><a href="#macros">Macros</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='macro' href='macro.py_func!.html'
                               title='cpython::py_func!'>py_func!</a></td>
                        <td class='docblock short'>
                             <p>Creates a python callable object that invokes a Rust function.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='macro' href='macro.py_module_initializer!.html'
                               title='cpython::py_module_initializer!'>py_module_initializer!</a></td>
                        <td class='docblock short'>
                             <p>Expands to an <code>extern &quot;C&quot;</code> function that allows python to load
the rust code as a python extension module.</p>

                        </td>
                    </tr>
                </table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.GILGuard.html'
                               title='cpython::GILGuard'>GILGuard</a></td>
                        <td class='docblock short'>
                             <p>RAII type that represents an acquired GIL.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyBool.html'
                               title='cpython::PyBool'>PyBool</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyDict.html'
                               title='cpython::PyDict'>PyDict</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyErr.html'
                               title='cpython::PyErr'>PyErr</a></td>
                        <td class='docblock short'>
                             <p>Represents a python exception that was raised.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyFloat.html'
                               title='cpython::PyFloat'>PyFloat</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyInt.html'
                               title='cpython::PyInt'>PyInt</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyIterator.html'
                               title='cpython::PyIterator'>PyIterator</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyList.html'
                               title='cpython::PyList'>PyList</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyLong.html'
                               title='cpython::PyLong'>PyLong</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyModule.html'
                               title='cpython::PyModule'>PyModule</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyObject.html'
                               title='cpython::PyObject'>PyObject</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyString.html'
                               title='cpython::PyString'>PyString</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyTuple.html'
                               title='cpython::PyTuple'>PyTuple</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyType.html'
                               title='cpython::PyType'>PyType</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.PyUnicode.html'
                               title='cpython::PyUnicode'>PyUnicode</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='struct' href='struct.Python.html'
                               title='cpython::Python'>Python</a></td>
                        <td class='docblock short'>
                             <p>Marker type that indicates that the GIL is currently held.</p>

                        </td>
                    </tr>
                </table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.FromPyObject.html'
                               title='cpython::FromPyObject'>FromPyObject</a></td>
                        <td class='docblock short'>
                             <p>FromPyObject is implemented by various types that can be extracted from a python object.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.ObjectProtocol.html'
                               title='cpython::ObjectProtocol'>ObjectProtocol</a></td>
                        <td class='docblock short'>
                             <p>Trait that contains methods</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.PythonObject.html'
                               title='cpython::PythonObject'>PythonObject</a></td>
                        <td class='docblock short'>
                             <p>Trait implemented by all python object types.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.PythonObjectWithCheckedDowncast.html'
                               title='cpython::PythonObjectWithCheckedDowncast'>PythonObjectWithCheckedDowncast</a></td>
                        <td class='docblock short'>
                             <p>Trait implemented by python object types that allow a checked downcast.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.PythonObjectWithTypeObject.html'
                               title='cpython::PythonObjectWithTypeObject'>PythonObjectWithTypeObject</a></td>
                        <td class='docblock short'>
                             <p>Trait implemented by python object types that have a corresponding type object.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.ToPyObject.html'
                               title='cpython::ToPyObject'>ToPyObject</a></td>
                        <td class='docblock short'>
                             <p>Conversion trait that allows various objects to be converted into python objects.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='trait' href='trait.ToPythonPointer.html'
                               title='cpython::ToPythonPointer'>ToPythonPointer</a></td>
                        <td class='docblock short'>
                             <p>This trait allows retrieving the underlying FFI pointer from python objects.</p>

                        </td>
                    </tr>
                </table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='fn' href='fn.prepare_freethreaded_python.html'
                               title='cpython::prepare_freethreaded_python'>prepare_freethreaded_python</a></td>
                        <td class='docblock short'>
                             <p>Prepares the use of python in a free-threaded context.</p>

                        </td>
                    </tr>
                </table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table>
                    <tr class=' module-item'>
                        <td><a class='type' href='type.PyResult.html'
                               title='cpython::PyResult'>PyResult</a></td>
                        <td class='docblock short'>
                             <p>Represents the result of a python call.</p>

                        </td>
                    </tr>
                
                    <tr class=' module-item'>
                        <td><a class='type' href='type.Py_ssize_t.html'
                               title='cpython::Py_ssize_t'>Py_ssize_t</a></td>
                        <td class='docblock short'>
                             
                        </td>
                    </tr>
                </table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code>, <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "cpython";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>